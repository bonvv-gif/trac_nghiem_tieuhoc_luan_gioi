<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Ph·∫ßn m·ªÅm tr·∫Øc nghi·ªám ti·ªÉu h·ªçc</title>
  <style>
    body { font-family: Arial; background:#f2f7ff; }
    .container { max-width:650px; margin:30px auto; background:#fff; padding:25px; border-radius:14px; box-shadow:0 4px 10px rgba(0,0,0,.1); }
    h1 { text-align:center; color:#2b6cb0; }
    .option { padding:12px; margin:10px 0; background:#edf2f7; border-radius:10px; cursor:pointer; }
    .option:hover { background:#bee3f8; }
    .correct { background:#9ae6b4; }
    .wrong { background:#feb2b2; }
    button { padding:10px 20px; border:none; border-radius:8px; background:#2b6cb0; color:#fff; cursor:pointer; margin-top:10px; }
    button:hover { background:#2c5282; }
    input { padding:10px; width:100%; margin-top:8px; }
    .toast { position:fixed; top:20px; right:20px; background:#2b6cb0; color:#fff; padding:12px 18px; border-radius:10px; }
  </style>
</head>
<body>
<div class="container" id="app"></div>

<script>
/* ===== D·ªÆ LI·ªÜU ===== */
let questions = JSON.parse(localStorage.getItem('questions') || '[]');
let index = 0, score = 0, student = '', timer;

/* ===== MENU ===== */
function showMenu() {
  app.innerHTML = `
    <h1>Ph·∫ßn m·ªÅm tr·∫Øc nghi·ªám</h1>
    <button onclick="showTeacher()">üë©‚Äçüè´ Gi√°o vi√™n</button>
    <button onclick="showStudent()">üë¶ H·ªçc sinh</button>
  `;
}

/* ===== GI√ÅO VI√äN ===== */
function showTeacher() {
  app.innerHTML = `
    <h1>Gi√°o vi√™n th√™m c√¢u h·ªèi</h1>
    <input id="q" placeholder="C√¢u h·ªèi">
    <input id="a" placeholder="ƒê√°p √°n A">
    <input id="b" placeholder="ƒê√°p √°n B">
    <input id="c" placeholder="ƒê√°p √°n C">
    <input id="d" placeholder="ƒê√°p √°n D">
    <input id="ans" placeholder="ƒê√°p √°n ƒë√∫ng (0-3)">
    <button onclick="addQuestion()">‚ûï Th√™m c√¢u h·ªèi</button>
    <button onclick="clearAll()" style="background:#c53030">üóëÔ∏è X√≥a to√†n b·ªô c√¢u h·ªèi</button>
    <button onclick="showMenu()">‚¨Ö Quay l·∫°i</button>
  `;
}

function addQuestion() {
  const q = qv('q'), a = qv('a'), b = qv('b'), c = qv('c'), d = qv('d');
  const ans = parseInt(qv('ans'));
  if (!q || !a || !b || !c || !d || isNaN(ans) || ans<0 || ans>3) {
    alert('Nh·∫≠p ƒë·ªß d·ªØ li·ªáu!');
    return;
  }
  questions.push({ q, options:[a,b,c,d], answer:ans });
  localStorage.setItem('questions', JSON.stringify(questions));
  showToast(`ƒê√£ th√™m (${questions.length} c√¢u)`);
  ['q','a','b','c','d','ans'].forEach(id=>document.getElementById(id).value='');
}

/* üî¥ CH·ª®C NƒÇNG X√ìA HO√ÄN THI·ªÜN */
function clearAll() {
  if (!confirm('X√≥a TO√ÄN B·ªò c√¢u h·ªèi t·ª´ c√¢u 1 ƒë·∫øn h·∫øt?')) return;

  questions.splice(0, questions.length); // x√≥a s·∫°ch m·∫£ng
  localStorage.setItem('questions', JSON.stringify([]));

  index = 0; score = 0; student = '';
  clearInterval(timer);

  showToast('ƒê√£ x√≥a to√†n b·ªô c√¢u h·ªèi');
  showTeacher();
}

/* ===== H·ªåC SINH ===== */
function showStudent() {
  if (questions.length === 0) {
    alert('Ch∆∞a c√≥ c√¢u h·ªèi!');
    return;
  }
  app.innerHTML = `
    <h1>H·ªçc sinh l√†m b√†i</h1>
    <input id="name" placeholder="T√™n h·ªçc sinh">
    <button onclick="startQuiz()">‚ñ∂ B·∫Øt ƒë·∫ßu</button>
    <button onclick="showMenu()">‚¨Ö Quay l·∫°i</button>
  `;
}

function startQuiz() {
  student = qv('name');
  if (!student) return alert('Nh·∫≠p t√™n!');
  index = 0; score = 0;
  showQuestion();
}

function showQuestion() {
  const q = questions[index];
  app.innerHTML = `<h1>C√¢u ${index+1}/${questions.length}</h1><p>${q.q}</p>`;
  q.options.forEach((o,i)=>{
    const div=document.createElement('div');
    div.className='option';
    div.innerText=o;
    div.onclick=()=>choose(i);
    app.appendChild(div);
  });
}

function choose(i) {
  if (i === questions[index].answer) score++;
  index++;
  index < questions.length ? showQuestion() : finish();
}

function finish() {
  app.innerHTML = `
    <h1>Ho√†n th√†nh</h1>
    <p>${student}</p>
    <p>ƒêi·ªÉm: ${score}/${questions.length}</p>
    <button onclick="showMenu()">‚¨Ö Menu</button>
  `;
}

/* ===== TI·ªÜN √çCH ===== */
function qv(id){ return document.getElementById(id).value.trim(); }
function showToast(msg){
  const t=document.createElement('div');
  t.className='toast'; t.innerText=msg;
  document.body.appendChild(t);
  setTimeout(()=>t.remove(),2000);
}

showMenu();
</script>
</body>
</html>

